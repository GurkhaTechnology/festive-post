function initializeImageControls(e,t,a,r,i,s){function n(t){if(t){const a=new FileReader;a.onload=t=>{const a=new Image;a.onload=()=>{const t=document.createElement("canvas");let s=a.width,n=a.height;s>n?s>400&&(n*=400/s,s=400):n>400&&(s*=400/n,n=400),t.width=s,t.height=n;t.getContext("2d").drawImage(a,0,0,s,n);const l=t.toDataURL("image/png",.8);fabric.Image.fromURL(l,t=>{i&&e.remove(i),(i=t).set({left:e.width/2,top:100,originX:"center",opacity:parseFloat(r.value)}),e.add(i),e.renderAll()})},a.src=t.target.result},a.readAsDataURL(t)}}t.addEventListener("change",e=>{n(e.target.files[0])}),a.addEventListener("dragover",e=>{e.preventDefault(),a.classList.add("highlight")}),a.addEventListener("dragleave",()=>{a.classList.remove("highlight")}),a.addEventListener("drop",e=>{e.preventDefault(),a.classList.remove("highlight");n(e.dataTransfer.files[0])}),r.addEventListener("input",()=>{i&&(i.set("opacity",parseFloat(r.value)),e.renderAll())}),s.addEventListener("click",t=>{if(t.target.classList.contains("filter-btn")){document.querySelectorAll(".filter-btn").forEach(e=>e.classList.remove("active")),t.target.classList.add("active");const a=t.target.dataset.filter;e.backgroundImage&&(e.backgroundImage.filters=[],"grayscale"===a?e.backgroundImage.filters.push(new fabric.Image.filters.Grayscale):"sepia"===a?e.backgroundImage.filters.push(new fabric.Image.filters.Sepia):"invert"===a&&e.backgroundImage.filters.push(new fabric.Image.filters.Invert),e.backgroundImage.applyFilters(),e.renderAll())}}),s.addEventListener("keydown",t=>{if(t.target.classList.contains("filter-btn")&&("Enter"===t.key||" "===t.key)){t.preventDefault(),document.querySelectorAll(".filter-btn").forEach(e=>e.classList.remove("active")),t.target.classList.add("active");const a=t.target.dataset.filter;e.backgroundImage&&(e.backgroundImage.filters=[],"grayscale"===a?e.backgroundImage.filters.push(new fabric.Image.filters.Grayscale):"sepia"===a?e.backgroundImage.filters.push(new fabric.Image.filters.Sepia):"invert"===a&&e.backgroundImage.filters.push(new fabric.Image.filters.Invert),e.backgroundImage.applyFilters(),e.renderAll())}})}export{initializeImageControls};