function initializeTextControls(e,t,a,l,n,r,s,i,o,d,u,v,c,f,p,g){function h(a=""){const n=new fabric.Textbox(a,{left:e.width/2,top:e.height/2,fill:l.value,fontSize:parseInt(i.value),fontFamily:r.value,textAlign:document.querySelector(".align-btn.active").dataset.align,originX:"center",angle:parseInt(o.value),strokeWidth:parseInt(d.value),stroke:u.value,shadow:new fabric.Shadow({color:v.value,blur:parseInt(c.value),offsetX:parseInt(f.value),offsetY:parseInt(p.value)})});e.add(n),e.setActiveObject(n),t=n,e.renderAll()}function E(){t&&(t.set("shadow",new fabric.Shadow({color:v.value,blur:parseInt(c.value),offsetX:parseInt(f.value),offsetY:parseInt(p.value)})),e.renderAll())}function L(e){a.value=e.text,l.value=e.fill,r.value=e.fontFamily,i.value=e.fontSize,o.value=e.angle,d.value=e.strokeWidth||0,u.value=e.stroke||"#000000",document.querySelectorAll(".align-btn").forEach(t=>{t.classList.remove("active"),t.dataset.align===e.textAlign&&t.classList.add("active")}),e.shadow?(v.value=e.shadow.color,c.value=e.shadow.blur,f.value=e.shadow.offsetX,p.value=e.shadow.offsetY):(v.value="#000000",c.value=0,f.value=0,p.value=0)}a.addEventListener("input",a=>{t&&"textbox"===t.type?t.set("text",a.target.value):h(a.target.value),e.renderAll()}),l.addEventListener("input",a=>{t&&(t.set("fill",a.target.value),e.renderAll())}),n.addEventListener("keydown",a=>{if(a.target.classList.contains("color-swatch")&&("Enter"===a.key||" "===a.key)){a.preventDefault();const n=a.target.dataset.color;l.value=n,t&&(t.set("fill",n),e.renderAll())}}),g.addEventListener("click",()=>{h("New Text")}),r.addEventListener("change",()=>{t&&(t.set("fontFamily",r.value),e.renderAll())}),s.querySelectorAll(".align-btn").forEach(a=>{a.addEventListener("keydown",l=>{"Enter"!==l.key&&" "!==l.key||(l.preventDefault(),document.querySelectorAll(".align-btn").forEach(e=>e.classList.remove("active")),a.classList.add("active"),t&&(t.set("textAlign",a.dataset.align),e.renderAll()))})}),i.addEventListener("input",()=>{t&&(t.set("fontSize",parseInt(i.value)),e.renderAll())}),o.addEventListener("input",()=>{t&&(t.set("angle",parseInt(o.value)),e.renderAll())}),d.addEventListener("input",()=>{t&&(t.set("strokeWidth",parseInt(d.value)),e.renderAll())}),u.addEventListener("input",()=>{t&&(t.set("stroke",u.value),e.renderAll())}),v.addEventListener("input",E),c.addEventListener("input",E),f.addEventListener("input",E),p.addEventListener("input",E),e.on("selection:created",e=>{e.selected[0]&&"textbox"===e.selected[0].type&&L(t=e.selected[0])}),e.on("selection:updated",e=>{e.selected[0]&&"textbox"===e.selected[0].type&&L(t=e.selected[0])}),e.on("selection:cleared",()=>{t=null,a.value=""}),h("Your Company Name")}export{initializeTextControls,updateControls,resetControls};