document.addEventListener("DOMContentLoaded",()=>{const e=new fabric.Canvas("canvas"),t=document.getElementById("company-name"),n=document.getElementById("logo-upload"),d=document.getElementById("drop-zone"),o=document.getElementById("logo-opacity"),l=document.getElementById("brand-color"),m=document.getElementById("color-palette"),a=document.getElementById("download-btn"),i=document.getElementById("download-format"),c=document.getElementById("template-gallery"),g=document.getElementById("category-filters"),u=document.getElementById("search-template"),s=document.getElementById("font-family"),y=document.getElementById("text-align-buttons"),r=document.getElementById("font-size"),I=document.getElementById("text-rotation"),E=document.getElementById("text-outline-width"),B=document.getElementById("text-outline-color"),p=document.getElementById("text-shadow-color"),f=document.getElementById("text-shadow-blur"),b=document.getElementById("text-shadow-offset-x"),h=document.getElementById("text-shadow-offset-y"),w=document.getElementById("image-filters"),x=document.getElementById("save-design-btn"),v=document.getElementById("load-design-btn"),C=document.getElementById("load-design-input"),z=document.getElementById("add-text-btn");let L,T=[];function k(t){fabric.Image.fromURL(t,t=>{e.setBackgroundImage(t,e.renderAll.bind(e),{scaleX:e.width/t.width,scaleY:e.height/t.height,filters:e.backgroundImage.filters||[]})})}loadTemplates(e=>{T=e,displayCategories(T,g,e=>displayTemplates(T,e,u.value,c,k)),displayTemplates(T,"all","",c,k)}),initializeTextControls(e,L,t,l,m,s,y,r,I,E,B,p,f,b,h,z),initializeImageControls(e,n,d,o,undefined,w),initializeSaveLoadHandler(e,x,v,C,L,updateControls,resetControls),initializeDownloadHandler(e,a,i),u.addEventListener("input",()=>{const e=document.querySelector(".category-btn.active").textContent.toLowerCase();displayTemplates(T,e,u.value,c,k)})});